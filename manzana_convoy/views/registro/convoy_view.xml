<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Vista de Formulario -->
    <record id="view_mz_convoy_form" model="ir.ui.view">
        <field name="name">mz.convoy.form</field>
        <field name="model">mz.convoy</field>
        <field name="arch" type="xml">
            <form string="Ficha de Evento">
                <sheet>
                    <div class="oe_title">
                        <h1>
                            <field name="nombre_evento" placeholder="Nombre del Evento"/>
                        </h1>
                    </div>
                    <group string="Información General del Evento">
                        <field name="institucion_anfitriona"/>
                        <field name="formato_evento"/>
                    </group>
                    <group>
                        <group>
                            <field name="director_coordinador"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Agenda Sugerida">
                            <group>
                                <group>
                                    <field name="fecha_evento"/>
                                    <field name="dia_semana"/>
                                    <field name="lugar"/>
                                </group>
                                <group>
                                    <field name="hora_inicio" widget="float_time"/>
                                    <field name="hora_fin" widget="float_time"/>
                                    <field name="duracion" />
                                </group>
                            </group>
                        </page>

                        <page string="Participación y Formato">
                            <group>
                                <group>
                                    <field name="tipo_evento" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}" />

                                    <field name="numero_asistentes"/>
                                    <field name="codigo_vestimenta"/>
                                </group>
                                <group>
                                    <field name="participacion_prefecta" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}" />
                                    <field name="tiempo_intervencion" widget="float_time"/>
                                    <field name="prensa"/>
                                    <field name="data_politica"/>
                                </group>
                            </group>
                        </page>

                        <page string="Mesa Técnica">
                            <field name="mesa_tecnica_ids">
                                <tree editable="bottom">
                                    <field name="nombre"/>
                                    <field name="cargo_institucion_id"/>
                                    <field name="contacto"/>
                                </tree>
                            </field>
                        </page>

                        <page string="Logística y Responsables">
                            <group>
                                <group string="Logística Requerida">
                                    <field name="sillas_requeridas"/>
                                    <field name="carpas_requeridas"/>
                                    <field name="responsable_convoy"/>
                                </group>
                                <group string="Responsables por Áreas">
                                    <field name="responsables_avanzada" widget="many2many_tags"/>
                                    <field name="responsable_socializacion"/>
                                    <field name="responsable_mesa_tecnica"/>
                                    <field name="responsable_convocatoria"/>
                                </group>
                            </group>
                        </page>

                        <page string="Autoridades">
                            <field name="autoridades_externa_ids">
                                <tree editable="bottom">
                                    <field name="nombre"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Alertas/Quejas">
                            <field name="alertas_quejas_ids">
                                <tree editable="bottom">
                                    <field name="nombre"/>
                                </tree>
                            </field>
                        </page>
                        
                        
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Vista de Árbol (Lista) -->
    <record id="view_mz_convoy_tree" model="ir.ui.view">
        <field name="name">mz.convoy.tree</field>
        <field name="model">mz.convoy</field>
        <field name="arch" type="xml">
            <tree string="Eventos">
                <field name="nombre_evento"/>
                <field name="fecha_evento"/>
                <field name="lugar"/>
                <field name="tipo_evento"/>
                <field name="numero_asistentes"/>
                <field name="director_coordinador"/>
            </tree>
        </field>
    </record>

    <!-- Vista de Búsqueda -->
    <record id="view_mz_convoy_search" model="ir.ui.view">
        <field name="name">mz.convoy.search</field>
        <field name="model">mz.convoy</field>
        <field name="arch" type="xml">
            <search string="Buscar Eventos">
                <field name="nombre_evento"/>
                <field name="lugar"/>
                <field name="director_coordinador"/>
                <filter string="Eventos Públicos" name="publico" domain="[('tipo_evento','=','publico')]"/>
                <filter string="Eventos Privados" name="privado" domain="[('tipo_evento','=','privado')]"/>
                <group expand="0" string="Agrupar Por">
                    <filter string="Tipo de Evento" name="group_tipo" context="{'group_by': 'tipo_evento'}"/>
                    <filter string="Fecha" name="group_fecha" context="{'group_by': 'fecha_evento'}"/>
                </group>
            </search>
        </field>
    </record>

    <!-- Acción de Ventana -->
    <record id="action_mz_convoy" model="ir.actions.act_window">
        <field name="name">Fichas de Eventos</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">mz.convoy</field>
        <field name="view_mode">tree,form</field>
        <field name="search_view_id" ref="view_mz_convoy_search"/>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Crear tu primera ficha de evento
            </p>
            <p>
                Registra los detalles de tus eventos incluyendo toda la información logística necesaria.
            </p>
        </field>
    </record>

    <!-- Elemento de Menú -->
    <menuitem id="menu_mz_convoy" name="Fichas de Eventos" parent="mz_convoy_menu_registro" action="action_mz_convoy" sequence="20"/>
</odoo>