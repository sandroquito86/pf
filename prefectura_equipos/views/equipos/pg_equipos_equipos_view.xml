<odoo>
  <data>
    <record model="ir.ui.view" id="pg_equipos_graph_view">
      <field name="name">pg_equipos.pg_equipos.graph</field>
      <field name="model">pg_equipos.pg_equipos</field>
      <field name="type">graph</field>
      <field name="arch" type="xml">
        <graph string="Activo" type="bar">
          <field name="categoria_id" />
          <field name="programa_id" />
        </graph>
      </field>
    </record>

    <record model="ir.ui.view" id="pg_equipos_graph_view_estado">
      <field name="name">pg_equipos.pg_equipos.graph</field>
      <field name="model">pg_equipos.pg_equipos</field>
      <field name="type">graph</field>
      <field name="arch" type="xml">
        <graph string="Activo" type="bar">
          <field name="categoria_id" />
          <field name="programa_id" />
        </graph>
      </field>
    </record>

    <record id="pg_equiposs_form_view" model="ir.ui.view">
      <field name="name">pg_equipos.pg_equipos.form</field>
      <field name="model">pg_equipos.pg_equipos</field>
      <field name="arch" type="xml">
        <form duplicate="0">
          <header>
            <field name="estado_id" widget="statusbar" statusbar_visible="borrador,activo,inactivo,baja" />
            <!-- Agregado options con clickable -->
          </header>
          <sheet>
            <div class="d-flex justify-content-between align-items-start">
              <div class="flex-grow-1">
                <h1>
                  <field name="name" placeholder="Nombre del Equipo" required="True" style="font-size: min(4vw, 2.6rem);"/>
                </h1>


                <group class="mt-4">
                  <field name="grupo_id" type="object" placeholder="Grupo...." options="{'no_create': True, 'no_open': True, 'no_create_edit': True}" />
                  <field name="categoria_id" domain="[('grupo_id','=',grupo_id)]" placeholder="Categoria...." options="{'no_create': True, 'no_open': True, 'no_create_edit': True}" />
                  <field name="nombre_equipo" domain="[('categoria_id','=',categoria_id)]" placeholder="Tipo...." options="{'no_create': True, 'no_open': True, 'no_create_edit': True}" />
                  <field name="empleado_id" placeholder="Seleccione el responsable del activos.." context="{'form_view_ref': 'th_gestion_hr.view_hr_personal_lectura_form'}" options="{'no_create': True,  'no_create_edit': True}" />
                  <field name="programa_id" readonly="1" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}" />
                  <field name="user_id" invisible="1" />
                </group>
              </div>
              <div class="ms-3 flex-shrink-0">
                <field name="image" widget="image" class="oe_avatar" options="{
                           'preview_image': 'image_medium',
                           'size': [306, 306]
                       }" style="width: 306px; height: 306px; object-fit: contain;"/>
              </div>
            </div>
            <notebook>
              <page name="info" string="Información Básica">
                <group >
                  <group>
                    <field name="pg_marca_id_domain" invisible="True" />
                    <field name="marca_id" required="1" options="{'domain_field': 'pg_marca_id_domain', 'no_create_edit': True, 'no_open': True,'no_create': True}"/>
                    <field name="modelo_id" required="1" domain="[('marca_id','=',marca_id)]" context="{'default_marca_id': marca_id, 'form_view_ref': 'prefectura_equipos.view_pg_equipos_modelo_form2'}" />

                  </group>
                  <group>
                    <field name="fecha_adquisicion" />
                    <field name="serial" widget="auto_fill"/>
                  </group>
                </group>
              </page>

              <page name="caracteristicas" string="Características Generales">
                <field name="detalle_caracteristicas_ids" widget="one2many">
                  <tree string="Caracteristicas" editable="bottom">
                    <field name="caracteristica_id_domain" invisible="1" />
                    <field name="caracteristica_id" domain="caracteristica_id_domain" options="{'no_create': True, 'no_open': True, 'no_create_edit': True}" />
                    <field name="valor_id" context="{'default_caracteristica_id': caracteristica_id, 'show_attribute': False}" options="{'no_open': True, 'no_create_edit': True}" />
                  </tree>
                </field>
              </page>

              <page name="garantia" string="Garantía">
                <group>
                  <group>
                    <field name="inicio_garantia" placeholder="Fecha de Inicio de garantía.." />
                    <field name="start_date" placeholder="Fecha que empieza a usarse.." />
                  </group>
                  <group>
                    <field name="fin_garantia" placeholder="Fecha de fin de garantía.." />
                  </group>
                </group>
              </page>


              <page name="biblioteca" string="Biblioteca">
                <group>
                  <field name="file_biblioteca_ids" widget="many2many_binary" />
                </group>
              </page>
            </notebook>
          </sheet>
          <div class="oe_chatter">
            <field name="message_follower_ids" widget="mail_followers" />
            <field name="message_ids" widget="mail_thread" />
          </div>
        </form>
      </field>
    </record>

    <!-- <record id="view_pg_equipos_pg_equipos_form_inherited" model="ir.ui.view">
      <field name="name">pg_equipos.pg_equipos.form</field>
      <field name="model">pg_equipos.pg_equipos</field>
      <field name="inherit_id" ref="pg_equiposs_form_view" />
      <field name="type">form</field>
      <field name="groups_id" eval="[(6, 0, [ref('grupo_equipos_registrador_general'),ref('grupo_equipos_administrador_general')])]" />
      <field name="arch" type="xml">
        <xpath expr="//field[@name='programa_id']" position="attributes">
          <attribute name="readonly">False</attribute>
        </xpath>
      </field>
    </record> -->



    <record model="ir.ui.view" id="pg_equiposs_search">
      <field name="name">pg_equipos.pg_equipos</field>
      <field name="model">pg_equipos.pg_equipos</field>
      <field name="arch" type="xml">
        <search string="Busqueda activo">
          <field name="name" />
          <field name="programa_id" />
          <field name="empleado_id" />

          <field name="categoria_id" />
          <field name="marca_id" />
          <field name="detalle_caracteristicas_ids" string="Características Generales" filter_domain="[('detalle_caracteristicas_ids.valor_id', 'ilike', self)]" />
          <field name="estado_id" />
          <separator />
          <group expand="0" string="Group By">
            <filter name="programa" string="Programa" context="{'group_by': 'programa_id'}" />
            <filter name="empleado" string="Empleado" context="{'group_by': 'empleado_id'}" />
            <filter name="grupo" string="Grupo" context="{'group_by': 'grupo_id'}" />
            <filter name="categoria" string="Categoria" context="{'group_by': 'categoria_id'}" />
            <filter name="tipo" string="Tipo de activo" context="{'group_by': 'nombre_equipo'}" />
            <filter name="marca" string="Marca" context="{'group_by': 'marca_id'}" />
            <filter name="estado" string="Estado" context="{'group_by': 'estado_id'}" />
          </group>
        </search>
      </field>
    </record>

    <record id="pg_equiposs_tree_view" model="ir.ui.view">
      <field name="name">pg_equipos.pg_equipos.tree</field>
      <field name="model">pg_equipos.pg_equipos</field>
      <field name="arch" type="xml">
        <tree string="Assets" duplicate="0">
          <field name="serial" />
          <field name="name" />
          <field name="empleado_id" />
          <field name="programa_id" optional="hide"/>
          <field name="estado_id" optional="hide"/>
          <field name="detalle_caracteristicas_ids" widget="many2many_tags" optional="hide"/>
        </tree>
      </field>
    </record>


    <record id="action_activo_activo_server" model="ir.actions.server">
      <field name="name">Equipos</field>
      <field name="model_id" ref="model_pg_equipos_pg_equipos" />
      <field name="binding_model_id" ref="model_pg_equipos_pg_equipos" />
      <field name="state">code</field>
      <field name="code">action = env['pg_equipos.pg_equipos'].ver_activos()</field>
    </record>


    <menuitem name="Equipos" action="action_activo_activo_server" id="menu_action_pg_equiposs" parent="pg_equipos_equipos" groups="grupo_equipos_administrador_general,grupo_equipos_registrador_sucursal,grupo_equipos_registrador_general" sequence="20" />

    <menuitem name="Equipos" action="action_activo_activo_server" id="mc_menu_registro_equipos" parent="manzana_de_cuidados.menu_programas" groups="grupo_equipos_administrador_general" sequence="100"/>

  </data>
</odoo>